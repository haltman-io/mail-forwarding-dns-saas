# Server
HOST=0.0.0.0
PORT=3000

# Database (MariaDB)
DB_HOST=localhost
DB_USER=your_user
DB_PASS=your_password
DB_NAME=mail_forwarding
DB_PORT=3306
DB_POOL_CONNECTION_LIMIT=10
DB_POOL_ACQUIRE_TIMEOUT_MS=15000
DB_POOL_CONNECT_TIMEOUT_MS=5000
DB_QUERY_RETRY_COUNT=2
DB_QUERY_RETRY_DELAY_MS=300

# Admin notifications
ADMIN_EMAIL_TO=admin@example.com

# SMTP
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_smtp_user
SMTP_PASS=your_smtp_pass
SMTP_FROM=no-reply@example.com

# DNS behavior
# Optional comma-separated list of DNS servers
DNS_SERVERS=1.1.1.1,1.0.0.1,8.8.8.8,8.8.4.4
DNS_POLL_INTERVAL_SECONDS=60
DNS_JOB_MAX_AGE_HOURS=24
DNS_TIMEOUT_MS=5000
DNS_MAX_RECORDS=20
DNS_MAX_TXT_RECORDS=50
DNS_MAX_TXT_LENGTH=512
DNS_MAX_HOST_LENGTH=253
CHECKDNS_MIN_INTERVAL_SECONDS=300

# Job & storage limits
# Capped automatically to DB_POOL_CONNECTION_LIMIT
MAX_ACTIVE_JOBS=10
RESUME_STARTUP_JITTER_MS=5000
TARGET_COOLDOWN_SECONDS=60
RESULT_JSON_MAX_BYTES=20000
EMAIL_BODY_MAX_LENGTH=8000

# Optional API key for /api/checkdns/:target
CHECKDNS_TOKEN=

# Expected values
UI_CNAME_EXPECTED=forward.haltman.io
# Optional: when set, CNAME validation follows the CNAME chain recursively
# and only passes if it resolves to one of these IPs.
# Example: UI_CNAME_AUTHORIZED_IPS=203.0.113.10,2001:db8::10
UI_CNAME_AUTHORIZED_IPS=
# Anti-abuse: max number of CNAME hops to resolve recursively.
UI_CNAME_MAX_CHAIN_DEPTH=10
EMAIL_MX_EXPECTED_HOST=mail.abin.lat
EMAIL_MX_EXPECTED_PRIORITY=10
EMAIL_DKIM_SELECTOR=s1
EMAIL_DKIM_CNAME_EXPECTED=s1._domainkey.dkim.abin.lat
EMAIL_SPF_EXPECTED=v=spf1 include:_spf.abin.lat mx -all
EMAIL_DMARC_EXPECTED=v=DMARC1; p=quarantine
